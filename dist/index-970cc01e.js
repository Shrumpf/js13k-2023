class b{constructor(){this.u=this.m=this.o=this.s=!1;this.g=new Map;this.h={s:this.s,o:this.o,m:this.m,u:this.u};document.addEventListener("keydown",a=>{this.g.set(a.code,!0)});document.addEventListener("keyup",a=>{this.g.set(a.code,!1)});this.l=new DOMPoint}}let g=new b;class h{constructor(a){this.g=a}H(){}G(){}}
class k extends h{constructor(a){super(a);this.h=!0;this.image=new Image;this.image.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAHgAAAA8BAMAAABfg2ObAAAAD1BMVEVaxU8zmEtdXV3T/H4AmNy3ehYlAAAB8UlEQVRIx6XW3XWEIBCGYchagHSgVLDn2IAX9F9TXAd5ceRvz343ScDHAUSicZ+YlF1+WEfms8UXItjVMD1/A3iK2lyNpIrndEkwrWj8KD2uzRoxukBe25s/WAHjGXe99LZpHfGa8Lax4A+8qdKC/Qp+63E7sC4t2Ef8ircH27gW9OW1Ba9PzMNOmNIkYscF2YqxklXsc3zTFm36WAYedkoz7SbOdaE0TenOzPnIid+iwVRnEaULfNsN06Xzd5qWk9YwWr/WtETsNWbJwaSM2UlM2zJsojDd+tWkMLE5XkuYSdMJ7lTev8Da8qhTJ/vMdjAvlxTmQELzShKeFQGLNjZVnukDB1PX4uUkKZ10gdI1feA1L3xEaNj1+T8dbUpT+PlGhzu9GtB+nZEJ7/maxbvRnvawX9JsJRxjLJqUpOOq4alL4YnBShgBhymYulyiUiqd4db+oDTTZqF72wNdCLNs2tatkY1pdzqcGx84uHDUk42LWrio07G8n49/V0uVsERhtkF4rFw4Ijh9+zGEx85g+OxEMJk/Yyl9XLQxAZcTJHecVoB/Jx1sGfDtsVO4kPQEpNaXAc9mJPOvmCRshuKex+t4WgPs41/04DPxZ+SLdcnwSG0fs8TfwH3tdRbwkWGLBlNcA/PnSwHrG+jrK/wfnCqVaBNNikoAAAAASUVORK5CYII="}H(){this.g.j.context.drawImage(this.image,0,
0,this.g.j.B,this.g.j.D);let a=this.g.j.B/2;l(this.g.j,"Menu",80,a,90);l(this.g.j,"Start Game",60,a,600,this.h?"white":"gray");l(this.g.j,"Toggle Fullscreen",60,a,700,this.h?"gray":"white");if(g.s&&!g.h.s||g.o&&!g.h.o)this.h=!this.h;g.m&&!g.h.m&&(this.h?m(this.g.J,"game"):document.fullscreenElement?document.exitFullscreen():document.documentElement.requestFullscreen())}}
let n=[{d:"M851.853,657.838l49.595,-60.43l59.597,-5.002l-0,-27.923l-22.506,-38.342l7.919,-22.088l150.035,-35.008l115.86,45.844l62.931,-14.587l-18.338,72.933l-78.768,60.014l-64.181,80.019l30.007,80.852l-66.266,-5.418l-53.762,-56.68l-20.838,-62.514l-91.271,-19.588l-60.014,7.918Z",v:{default:{fillStyle:"#fff"},I:{fillStyle:"#ff0000"}}},{d:"M702.482,582L744.992,511.984L741.658,413.628L782.501,372.785L826.261,374.036L945.038,502.815L938.37,526.988L960.459,564.913L960.459,591.169L902.112,597.004L848.766,657.851L753.327,646.599L702.482,582Z",
v:{default:{fillStyle:"#fff"},I:{fillStyle:"#ff0000"}}},{d:"M864.603,413.628L944.205,371.535L974.629,323.607L1047.56,317.773L1162.59,346.529L1145.09,392.373L1096.32,411.961L1096.74,466.974L945.872,504.482L864.603,413.628",v:{default:{fillStyle:"#fff"},I:{fillStyle:"#ff0000"}}}];
class p extends Path2D{constructor(a,c,d){super(c);this.g=a;this.v=d;this.style=d.default}update(){Object.assign(this.g.i,this.style);this.g.i.fill(this);this.style=this.g.i.isPointInPath(this,this.g.F.A.x,this.g.F.A.y,"nonzero")?this.v.I:this.v.default}}class q extends p{update(a){super.update(a)}}
class r extends h{constructor(a){super(a);this.h=[];this.l=new Image;this.l.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAHgAAAA8BAMAAABfg2ObAAAAD1BMVEVaxU8zmEtdXV3T/H4AmNy3ehYlAAAB8UlEQVRIx6XW3XWEIBCGYchagHSgVLDn2IAX9F9TXAd5ceRvz343ScDHAUSicZ+YlF1+WEfms8UXItjVMD1/A3iK2lyNpIrndEkwrWj8KD2uzRoxukBe25s/WAHjGXe99LZpHfGa8Lax4A+8qdKC/Qp+63E7sC4t2Ef8ircH27gW9OW1Ba9PzMNOmNIkYscF2YqxklXsc3zTFm36WAYedkoz7SbOdaE0TenOzPnIid+iwVRnEaULfNsN06Xzd5qWk9YwWr/WtETsNWbJwaSM2UlM2zJsojDd+tWkMLE5XkuYSdMJ7lTev8Da8qhTJ/vMdjAvlxTmQELzShKeFQGLNjZVnukDB1PX4uUkKZ10gdI1feA1L3xEaNj1+T8dbUpT+PlGhzu9GtB+nZEJ7/maxbvRnvawX9JsJRxjLJqUpOOq4alL4YnBShgBhymYulyiUiqd4db+oDTTZqF72wNdCLNs2tatkY1pdzqcGx84uHDUk42LWrio07G8n49/V0uVsERhtkF4rFw4Ijh9+zGEx85g+OxEMJk/Yyl9XLQxAZcTJHecVoB/Jx1sGfDtsVO4kPQEpNaXAc9mJPOvmCRshuKex+t4WgPs41/04DPxZ+SLdcnwSG0fs8TfwH3tdRbwkWGLBlNcA/PnSwHrG+jrK/wfnCqVaBNNikoAAAAASUVORK5CYII="}G(){this.h=n.map(a=>
new q(this.g,a.d,a.v))}H(a){this.g.j.context.drawImage(this.l,0,0,this.g.j.B,this.g.j.D);var c=this.h.length;for(var d=0;d<c;d++)this.h[d].update(a);a=this.g.F.A;for(c=0;1920>c;c+=24)for(d=0;1080>d;d+=24)a.x>c&&a.x<c+24&&a.y>d&&a.y<d+24&&(this.g.i.fillStyle="white",this.g.i.fillRect(c,d,25,25));g.u&&m(this.g.J,"menu")}}function m(a,c){if(!a.g.has(c))throw Error("Scene not found");a.h=a.g.get(c);a.h.G?.()}
class t{constructor(a){this.g=new Map;this.g.set("menu",new k(a));this.g.set("game",new r(a));this.h=this.g.get("menu");this.h.G?.()}}class u{constructor(){this.A={x:0,y:0};window.addEventListener("mousemove",a=>{"CANVAS"===a.target.nodeName&&(this.A.x=a.offsetX,this.A.y=a.offsetY)})}}class v{constructor(a,c){this.name=a;this.value=c;this.current=0}}class w extends v{constructor(){super("Stone",5)}}class x extends v{constructor(){super("Wood",1)}}
class y{constructor(){this.resources=new Map;this.resources.set("wood",new x);this.resources.set("stone",new w)}update(a){this.resources.forEach(c=>{c.current+=~~(c.value*a)})}}function l(a,c,d,e,f,z="white"){a=a.context;a.font=`${d}px Impact, sans-serif-black`;a.textAlign="center";a.strokeStyle="black";a.lineWidth=4;a.strokeText(c,e,f);a.fillStyle=z;a.fillText(c,e,f)}
class A{constructor(){this.context=c2d.getContext("2d");this.context.imageSmoothingEnabled=!1}get canvas(){return this.context.canvas}get B(){return this.canvas.width}get D(){return this.canvas.height}}
class B{constructor(a){this.g=1;let c=window.devicePixelRatio;cUI.width=1920*c;cUI.height=1080*c;cUI.style.width="1920px";cUI.style.height="1080px";this.i=cUI.getContext("2d");this.i.scale(c,c);this.C=a.C;this.i.font="32px Segoe UI, sans-serif";this.i.strokeStyle="black";this.i.lineWidth=4;this.i.fillStyle="white"}get canvas(){return this.i.canvas}update(){this.g=1;this.C.resources.forEach((a,c)=>{this.i.fillText(`${c}: ${a.current}`,100,40*this.g);this.g++})}}
class C{constructor(){this.K=0;this.l=1E3/60;this.j=new A;this.i=this.j.context;this.canvas=this.j.canvas;this.F=new u;this.C=new y;this.J=new t(this);this.h=new B(this);this.g=this.g.bind(this);this.g(0)}g(a){let c=a-this.K;if(c>=this.l){this.K=a-c%this.l;g.h.s=g.s;g.h.o=g.o;g.h.m=g.m;g.h.u=g.u;a=g.g.get("KeyA")||g.g.get("ArrowLeft")?-1:0;let d=g.g.get("KeyD")||g.g.get("ArrowRight")?1:0,e=g.g.get("KeyW")||g.g.get("ArrowUp")?-1:0,f=g.g.get("KeyS")||g.g.get("ArrowDown")?1:0;g.l.x=a+d||0;g.l.y=e+f||
0;g.s=0>g.l.y;g.o=0<g.l.y;g.m=!!g.g.get("Enter");g.u=!!g.g.get("Escape");this.i.clearRect(0,0,this.j.B,this.j.D);this.h.i.clearRect(0,0,this.h.canvas.width,this.h.canvas.height);this.J.h.H(c);this.h.update(c/600);this.C.update(1)}requestAnimationFrame(this.g)}}new C;
